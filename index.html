<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>MVT Periodic Table</title>
    <meta name="description" content="Concept modified by MVT team.">
    <link rel="stylesheet" href="styles.css" type="text/css" />
</head>

<body>
    <div id="full_shadow">
        <h1>Periodic Table of the Elements</h1>
    </div>
    <div class="wrapper">
        <ul class="main">

            <!-- ROW 1 -->

            <li data-pos="1" class="element-1"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>

            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>

            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>

            <li class="empty"></li>
            <li class="empty"></li>
            <li data-pos="2" class="element-2 "></li>

            <!-- ROW 2 -->

            <li data-pos="3" data-nb="6.941" class="element-3 ">LiLithium</li>
            <li data-pos="4" data-nb="9.0122" class="element-4 ">BeBeryllium</li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>

            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>

            <li class="empty"></li>
            <li class="empty"></li>
            <li data-pos="5" data-nb="10.811" class="element-5 ">BBoron</li>
            <li data-pos="6" data-nb="12.011" class="element-5 ">CCarbon</li>
            <li data-pos="7" data-nb="14.007" class="element-5 ">NNitrogen</li>

            <li data-pos="8" data-nb="15.999" class="element-5 ">OOxygen</li>
            <li data-pos="9" data-nb="18.998" class="element-5 ">FFluorine</li>
            <li data-pos="10" data-nb="20.180" class="element-2 ">NeNeon</li>

            <!-- ROW 3 -->

            <li data-pos="11" data-nb="22.990" class="element-3 ">NaSodium</li>
            <li data-pos="12" data-nb="24.305" class="element-4 ">MgMagnesium</li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>

            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>
            <li class="empty"></li>

            <li class="empty"></li>
            <li class="empty"></li>
            <li data-pos="13" data-nb="26.982" class="element-7 ">AlAluminium</li>
            <li data-pos="14" data-nb="28.086" class="element-5 ">SiSilicon</li>
            <li data-pos="15" data-nb="30.974" class="element-5 ">PPhosphorus</li>

            <li data-pos="16" data-nb="32.065" class="element-5 ">SSulfur</li>
            <li data-pos="17" data-nb="35.453" class="element-5 ">ClChlorine</li>
            <li data-pos="18" data-nb="39.948" class="element-2 ">ArArgon</li>

            <!-- ROW 4 -->

            <li data-pos="19" data-nb="39.098" class="element-3 ">KPotassium</li>
            <li data-pos="20" data-nb="40.078" class="element-4 ">CaCalcium</li>
            <li data-pos="21" data-nb="44.956" class="element-6 ">ScScandium</li>
            <li data-pos="22" data-nb="47.867" class="element-6 ">TiTitanium</li>
            <li data-pos="23" data-nb="50.942" class="element-6 ">VVanadium</li>

            <li data-pos="24" data-nb="51.996" class="element-6 ">CrChromium</li>
            <li data-pos="25" data-nb="54.938" class="element-6 ">MnManganese</li>
            <li data-pos="26" data-nb="55.845" class="element-6 ">FeIron</li>
            <li data-pos="27" data-nb="58.933" class="element-6 ">CoCobalt</li>
            <li data-pos="28" data-nb="58.693" class="element-6 ">NiNickel</li>

            <li data-pos="29" data-nb="63.546" class="element-6 ">CuCopper</li>
            <li data-pos="30" data-nb="65.39" class="element-7 ">ZnZinc</li>
            <li data-pos="31" data-nb="69.723" class="element-7 ">GaGallium</li>
            <li data-pos="32" data-nb="72.64" class="element-7 ">GeGermanium</li>
            <li data-pos="33" data-nb="74.922" class="element-5 ">AsArsenic</li>

            <li data-pos="34" data-nb="78.96" class="element-5 ">SeSelenium</li>
            <li data-pos="35" data-nb="79.904" class="element-5 ">BrBromine</li>
            <li data-pos="36" data-nb="83.80" class="element-2 ">KrKrypton</li>

            <!-- ROW 5 -->

            <li data-pos="37" data-nb="85.468" class="element-3 ">RbRubidium</li>
            <li data-pos="38" data-nb="87.62" class="element-4 ">SrStrontium</li>
            <li data-pos="39" data-nb="88.906" class="element-6 ">YYttrium</li>
            <li data-pos="40" data-nb="91.224" class="element-6 ">ZrZirconium</li>
            <li data-pos="41" data-nb="92.906" class="element-6 ">NbNiobium</li>

            <li data-pos="42" data-nb="95.94" class="element-6 ">MoMolybdenum</li>
            <li data-pos="43" data-nb="(96)" class="element-6 ">TcTechnetium</li>
            <li data-pos="44" data-nb="101.07" class="element-6 ">RuRuthenium</li>
            <li data-pos="45" data-nb="102.91" class="element-6 ">RhRhodium</li>
            <li data-pos="46" data-nb="106.42" class="element-6 ">PdPalladium</li>

            <li data-pos="47" data-nb="107.87" class="element-6 ">AgSilver</li>
            <li data-pos="48" data-nb="112.41" class="element-7 ">CdCadmium</li>
            <li data-pos="49" data-nb="114.82" class="element-7 ">InIndium</li>
            <li data-pos="50" data-nb="118.71" class="element-7 ">SnTin</li>
            <li data-pos="51" data-nb="121.76" class="element-7 ">SbAntimony</li>

            <li data-pos="52" data-nb="127.60" class="element-5 ">TeTellurium</li>
            <li data-pos="53" data-nb="126.90" class="element-5 ">IIodine</li>
            <li data-pos="54" data-nb="131.29" class="element-2 ">XeXenon</li>

            <!-- ROW 6 -->

            <li data-pos="55" data-nb="132.91" class="element-3 ">CsCaesium</li>
            <li data-pos="56" data-nb="137.33" class="element-4 ">BaBarium</li>
            <li data-pos="57-71" class="element-8">La-LuLanthanide</li>
            <li data-pos="72" data-nb="178.49" class="element-6 ">HfHafnium</li>
            <li data-pos="73" data-nb="180.95" class="element-6 ">TaTantalum</li>

            <li data-pos="74" data-nb="183.64" class="element-6 ">WTungsten</li>
            <li data-pos="75" data-nb="186.21" class="element-6 ">ReRhenium</li>
            <li data-pos="76" data-nb="190.23" class="element-6 ">OsOsmium</li>
            <li data-pos="77" data-nb="192.22" class="element-6 ">IrIridium</li>
            <li data-pos="78" data-nb="195.08" class="element-6 ">PtPlatinum</li>

            <li data-pos="79" data-nb="196.97" class="element-6 ">AuGold</li>
            <li data-pos="80" data-nb="200.59" class="element-7 ">HgMercury</li>
            <li data-pos="81" data-nb="204.38" class="element-7 ">TlThallium</li>
            <li data-pos="82" data-nb="207.2" class="element-7 ">PbLead</li>
            <li data-pos="83" data-nb="208.96" class="element-7 ">BiBismuth</li>

            <li data-pos="84" data-nb="(209)" class="element-7 ">PoPolonium</li>
            <li data-pos="85" data-nb="(210)" class="element-5 ">AtAstatine</li>
            <li data-pos="86" data-nb="(222)" class="element-2 ">RnRadon</li>

            <!-- ROW 7 -->

            <li data-pos="87" data-nb="(223)" class="element-3 ">FrFrancium</li>
            <li data-pos="88" data-nb="(226)" class="element-4 ">RaRadium</li>
            <li data-pos="89-103" class="element-9">Ac-LrActinide</li>
            <li data-pos="104" data-nb="(261)" class="element-6 ">RfRutherfodum</li>
            <li data-pos="105" data-nb="(262)" class="element-6 ">DbDubnium</li>

            <li data-pos="106" data-nb="(266)" class="element-6 ">SgSeaborgium</li>
            <li data-pos="107" data-nb="(264)" class="element-6 ">BhBohrium</li>
            <li data-pos="108" data-nb="(277)" class="element-6 ">HsHassium</li>
            <li data-pos="109" data-nb="(268)" class="element-6 ">MtMeitnerium</li>
            <li data-pos="110" data-nb="(281)" class="element-6 ">DsDamstadium</li>

            <li data-pos="111" data-nb="(272)" class="element-6 ">RgRoentgenium</li>
            <li data-pos="112" data-nb="(285)" class="element-7 ">UubUnunbium</li>
            <li data-pos="113" data-nb="(285)" class="element-7 ">UutUnuntrium</li>
            <li data-pos="114" data-nb="(289)" class="element-7 ">UuqUnunquadium</li>
            <li data-pos="115" data-nb="(289)" class="element-7 ">UupUnunpentium</li>

            <li data-pos="115" data-nb="(289)" class="element-7 ">UuhUnunhexium</li>
            <li data-pos="115" data-nb="(289)" class="element-0 ">UusUnunseptum</li>
            <li data-pos="115" data-nb="(289)" class="element-2 ">UuoUnunoctium</li>
        </ul>

        <div class="legend">
            <ul class="list-2">
                <div class="slidecontainer">
                    <h3>Boiling Point</h3><input type="range" min="1" max="100" value="50" class="slider" id="myRange"
                        onchange="updateTextInput(this.value);">
                    <input type="text" id="textInput" value="">

                </div>
                <div class="slidecontainer">


                    <h3>Melting Point</h3><input type="range" min="1" max="100" value="50" class="slider" id="myRange"
                        onchange="updateTextInput1(this.value);">
                    <input type="text" id="textInput1" value="">
                </div>
            </ul>
        </div>

    </div>

    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <h1 id="modal_symbol" style="font-size:3em; color:skyblue"></h1>
            <h2 id="modal_title"></h2>
            <br>
            <hr>
            <br>
            <ul>
                <li>
                    <strong>Appearance:</strong> <span id="modal_appearance"></span>
                </li>
                <li>
                    <strong>Discoverer:</strong> <span id="modal_discovery"></span>
                </li>
                <li>
                    <strong>Melting point:</strong> <span id="modal_melting_point"></span>
                </li>
                <li>
                    <strong>Boiling point:</strong> <span id="modal_boiling_point"></span>
                </li>
                <li>
                    <strong>Crystal Structure:</strong> <span id="modal_crystal_structure"></span>
                </li>

            </ul>

        </div>

    </div>


    <script type="text/javascript" src="jquery-3.3.1.js"></script>
    <script type="text/javascript" src="script.js"></script>

    <script>
        const fs = require('fs');
        fs.readFile('./periodic_table.json', (err, data) => {
            if (err) throw err;
            let parsedJson = JSON.parse(data);
            let selector;
            let elementDiv
            for (let i = 1; i <= 118; i++) {
                selector = "li[data-pos='" + i + "']";
                elementDiv = document.querySelector(selector);

                if (elementDiv != null) {
                    elementDiv.setAttribute('data-nb', parsedJson[i - 1].atomic_weight);
                    elementDiv.innerHTML = parsedJson[i - 1].symbol;
                }
            }
        });


        // Get the modal
        var modal = document.getElementById('myModal');

        // Get the button that opens the modal
        const elementList = document.querySelectorAll("ul.main > li");

        // Get the  element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on the button, open the modal 
        elementList.forEach(element => {
            element.addEventListener('click', AddModalData);
        });

        // When the user clicks on  (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        /** 
         * Adds data to the modal
         * @function 
         * @param {string} element - an html string with the target element data-pos
         */

        function AddModalData(element) {
            modal.style.display = "block";
            const el = Number(element.target.getAttribute('data-pos'));
            return queryElementData(el)
                .then(insertModalData)
                .catch(logError);

        }

        /** 
         * Queries json data for a matching element
         * @function 
         * @param {string} matchingElement - the Element we want to match, using it\'s atomic weight
         */

        function queryElementData(matchingElement) {
            return new Promise((resolve, reject) => {
                fs.readFile('./periodic_table.json', (err, data) => {
                    if (err) reject('Cannot not read the file');
                    let parsedJson = JSON.parse(data);
                    let queryVal;
                    parsedJson.map(element => {
                        queryVal = element.atomic_number;
                        if (queryVal === matchingElement) {
                            resolve(element);
                        }
                    });
                })
            })
        }

        /** 
         * Inserts matched data into the modal
         * @function
         * @param {object} element - the matched element we want to display
         */

        function insertModalData(element) {
            const modal_title = document.getElementById('modal_title');
            const modal_symbol = document.getElementById('modal_symbol');
            const modal_appearance = document.getElementById('modal_appearance');
            const modal_discovery = document.getElementById('modal_discovery');
            const modal_melting_point = document.getElementById('modal_melting_point');
            const modal_boiling_point = document.getElementById('modal_boiling_point');
            const modal_crystal_structure = document.getElementById('modal_crystal_structure');

            //check for any undefined
            for (val in element) {
                if (element[val] == undefined) {
                    element[val] = "n/a";
                }
            }

            modal_title.innerHTML = element.name;
            modal_symbol.innerHTML = element.symbol;
            modal_appearance.innerHTML = element.appearance;
            modal_discovery.innerHTML = element.discovery;
            modal_melting_point.innerHTML = element.melting_point;
            modal_boiling_point.innerHTML = element.boiling_point;
            modal_crystal_structure.innerHTML = element.crystal_structure;
        }

        /** 
         * Logs errors
         * @function
         * @param {string} error - the error to log
         */

        function logError(error) {
            console.error(error);
        }
    </script>
</body>

</html>